<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Head -->
  <%- include('partials/_head') %>
</head>

<body>
  <!-- Navbar -->
  <%- include('partials/_navbar') %>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

  <!-- External JS -->
  <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous"></script>

  <!-- App JS -->
  <script type="text/javascript" src="/scripts/app.js"></script>
  </head>

  <body>
    <div class="container mt-4">
      <table class="table">

        <!-- Orders List -->
        <div class="orders container mp-4 mt-4">
          <h2>My Orders</h2>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Order #</th>
                <th scope="col">Total Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Ordered On</th>
                <th scope="col">Status</th>
                <th scope="col">ETA (minutes)</th>
              </tr>
            </thead>
            <tbody>
              <% for(const order of orders) { %>
              <tr>
                <td><%= order.order_id %></td>
                <td> <%=order.total_price / 100 %></td>
                <td><%= order.quantity %></td>
                <td>
                  <%= order.created_at.getFullYear() + "/" + (order.created_at.getMonth() + 1) + "/" + order.created_at.getDate() %>
                </td>
                <td>
                  <!-- Display order submitted, in progress or completed progress bar depending on order -->
                  <% if (order.status === 'COMPLETED') { %>
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 100%"
                        aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    Complete
                  <% } else if (order.status === 'IN PROGRESS') { %>
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning" role="progressbar"
                        style="width: 50%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    Brewing in Progress...
                  <% } else { %>
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    Order Submitted
                  <% } %>
                </td>
                <td><%= order.eta %></td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>

        <!-- Footer -->
        <%- include('partials/_footer') %>

        <!-- jQuery and Boostrap Bundle -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
          integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
          crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous">
        </script>
  </body>

</html>
